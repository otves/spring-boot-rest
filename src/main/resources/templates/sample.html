<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>Timeline | Groups ordering</title>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="/dist/my.css" rel="stylesheet" type="text/css"/>
    <script src="/dist/vis.js"></script>
    <link href="/dist/vis.css" rel="stylesheet" type="text/css"/>
    <!--<script src="/googleAnalytics.js"></script>-->
</head>
<body>
<p>
    This example demonstrates custom ordering of groups.
</p>
<div id="visualization"></div>
<div id="loading">loading...</div>

<script>


    // load data via an ajax request. When the data is in, load the timeline
    $.ajax({
        url: '/rest/shifts?store=1511105',
        success: function (data) {
            console.log('>>>>:', data);
            // hide the "loading..." message
            document.getElementById('loading').style.display = 'none';

            // DOM element where the Timeline will be attached
            var container = document.getElementById('visualization');
            var timeline = new vis.Timeline(container);

            var groupsData = [];
            var itemsData = [];
            for (var prData in data) {
                var person = data[prData];
                for (var prPerson in person) {
                    if (prPerson == 'shifts') {
                        var shifts = person[prPerson];
                        for (var prShifts in shifts) {
                            var shift =  shifts[prShifts];
                            var start = new Date();
                            start.setTime(shift.start);
                            var end = new Date(start.setTime( start.getTime() + 86400000 ));
                            itemsData.push({id: shift.planId, group: person.id, content: '1', start: start, end: end});
                        }
                    }
                }
                groupsData.push({id: person.id, content: person.content, value: 0})
            }

            console.log('>>>>groupsData??:', [
                {id: 0, content: 'First', value: 0},
                {id: 1, content: 'Third', value: 0},
                {id: 2, content: 'Second', value: 0}
            ]);
            console.log('>>>>groupsData:', groupsData);
            console.log('>>>>itemsData:', itemsData);

            var groups = new vis.DataSet(groupsData);
            var items = new vis.DataSet(itemsData);

//			var options = {
//				groupOrder: function (a, b) {
//					return a.value - b.value;
//				},
//				editable: true
//			};

            //timeline.setOptions(options);
            timeline.setGroups(groups);
            timeline.setItems(items);
        },
        error: function (err) {
            console.log('Error', err);
            if (err.status === 0) {
                alert('Failed to load data/basic.json.\nPlease run this example on a server.');
            }
            else {
                alert('Failed to load data');
            }
        }
    });

    //	var groups = new vis.DataSet([
    //		{id: 0, content: 'First', value: 0},
    //		{id: 1, content: 'Third', value: 0},
    //		{id: 2, content: 'Second', value: 0}
    //	]);
    //
    //	// create a dataset with items
    //	// note that months are zero-based in the JavaScript Date object, so month 3 is April
    //	var items = new vis.DataSet([
    //		{id: 0, group: 0, content: 'item 0', start: new Date(2014, 3, 17), end: new Date(2014, 3, 21)},
    //		{id: 1, group: 0, content: 'item 1', start: new Date(2014, 3, 19), end: new Date(2014, 3, 20)},
    //		{id: 2, group: 1, content: 'item 2', start: new Date(2014, 3, 16), end: new Date(2014, 3, 24)},
    //		{id: 3, group: 1, content: 'item 3', start: new Date(2014, 3, 23), end: new Date(2014, 3, 24)},
    //		{id: 4, group: 1, content: 'item 4', start: new Date(2014, 3, 22), end: new Date(2014, 3, 26)},
    //		{id: 5, group: 2, content: 'item 5', start: new Date(2014, 3, 24), end: new Date(2014, 3, 27)}
    //	]);
    //
    //	var container = document.getElementById('visualization');
    //	var options = {
    //		groupOrder: function (a, b) {
    //			return a.value - b.value;
    //		},
    //		editable: true
    //	};
    //
    //	var timeline = new vis.Timeline(container);
    //	timeline.setOptions(options);
    //	timeline.setGroups(groups);
    //	timeline.setItems(items);

</script>
</body>
</html>